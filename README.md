# Kafka Diplom

## Описание проекта

Данный проект представляет собой распределённую аналитическую систему на базе **Apache Kafka**, предназначенную для обработки событий интернет-магазина.  
Система реализует потоковую передачу данных между сервисами, фильтрацию данных, базовую аналитику, репликацию между Kafka-кластерами и мониторинг.

Проект выполнен в рамках учебного задания и демонстрирует работу Kafka в многоброкерной конфигурации с дополнительным вторичным кластером.

---

## Используемые технологии

- Apache Kafka (KRaft mode)
- Kafka MirrorMaker 2
- Schema Registry
- Apache Avro
- Docker / Docker Compose
- Prometheus
- Grafana
- Alertmanager
- Python

---

## Архитектура решения

В системе используются следующие компоненты:

- **SHOP API**  
  Генерирует события о товарах и отправляет их в Kafka-топик `shop-products`.

- **CLIENT API**  
  Имитирует действия пользователей:
  - поиск товаров,
  - запрос персональных рекомендаций.  
  События отправляются в Kafka-топики:
  - `client-searches`,
  - `client-recommendations`.

- **Primary Kafka Cluster**  
  Основной Kafka-кластер, состоящий из трёх брокеров (`kafka-0`, `kafka-1`, `kafka-2`).

- **Secondary Kafka Cluster**  
  Вторичный Kafka-кластер, используемый для репликации данных.

- **MirrorMaker 2**  
  Отвечает за дублирование данных между primary и secondary Kafka-кластерами.

- **Schema Registry**  
  Используется для хранения и валидации Avro-схем сообщений.

- **Monitoring Stack**  
  Prometheus, Grafana и Alertmanager используются для сбора метрик и мониторинга состояния системы.

---

## Поток данных

1. SHOP API генерирует события о товарах и публикует их в топик `shop-products`.
2. CLIENT API отправляет пользовательские действия в топики:
   - `client-searches`,
   - `client-recommendations`.
3. Перед записью данных выполняется фильтрация запрещённых товаров.
4. Отфильтрованные данные сохраняются в файл `data/products.json`.
5. MirrorMaker 2 реплицирует данные из primary Kafka-кластера во secondary.
6. Метрики Kafka собираются через JMX Exporter и отображаются в Grafana.

